//****************************************************************************************************
//подключаемые библиотеки
//****************************************************************************************************
#include "ccudatimespent.cu.h"

//****************************************************************************************************
//макроопределения
//****************************************************************************************************

//****************************************************************************************************
//константы
//****************************************************************************************************

//****************************************************************************************************
//конструктор и деструктор класса
//****************************************************************************************************

//----------------------------------------------------------------------------------------------------
//конструктор
//----------------------------------------------------------------------------------------------------
__host__ CCUDATimeSpent::CCUDATimeSpent(void)
{
 cudaEventCreate(&StartEvent);
 cudaEventCreate(&StopEvent);


}
//----------------------------------------------------------------------------------------------------
//деструктор
//----------------------------------------------------------------------------------------------------
__host__ CCUDATimeSpent::~CCUDATimeSpent()
{
 cudaEventDestroy(StartEvent);
 cudaEventDestroy(StopEvent);
}
//****************************************************************************************************
//закрытые функции
//****************************************************************************************************


//****************************************************************************************************
//открытые функции класса
//****************************************************************************************************

//----------------------------------------------------------------------------------------------------
//начать измерение времени
//----------------------------------------------------------------------------------------------------
void CCUDATimeSpent::Start(void)
{
 cudaEventRecord(StartEvent,0);
}
//----------------------------------------------------------------------------------------------------
//завершить измерение времени и получить результат в миллисекундах
//----------------------------------------------------------------------------------------------------
float CCUDATimeSpent::Stop(void)
{
 cudaEventRecord(StopEvent,0);
 cudaEventSynchronize(StopEvent);
 float gpu_time;
 cudaEventElapsedTime(&gpu_time,StartEvent,StopEvent);
 return(gpu_time);
}
